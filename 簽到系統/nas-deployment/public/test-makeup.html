<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è£œç°½åˆ°åŠŸèƒ½æ¸¬è©¦</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .test-container {
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
        }
        
        .test-button {
            background: #17a2b8;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .test-button:hover {
            background: #138496;
            transform: translateY(-2px);
        }
        
        .mock-data {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1><i class="fas fa-calendar-plus"></i> è£œç°½åˆ°åŠŸèƒ½æ¸¬è©¦</h1>
            <p>æ¸¬è©¦ä¿®æ”¹å¾Œçš„è£œç°½åˆ°åŠŸèƒ½ï¼ŒåŒ…æ‹¬å­¸ç”Ÿå‡ºå‹¤ç‹€æ…‹é¸æ“‡</p>
        </div>
        
        <div class="test-section">
            <h3><i class="fas fa-play"></i> åŠŸèƒ½æ¸¬è©¦</h3>
            <p>é»æ“Šä¸‹æ–¹æŒ‰éˆ•ä¾†æ¸¬è©¦è£œç°½åˆ°åŠŸèƒ½ï¼š</p>
            
            <button class="test-button" onclick="testMakeupCourseDisplay()">
                <i class="fas fa-list"></i> æ¸¬è©¦èª²ç¨‹é¡¯ç¤º
            </button>
            
            <button class="test-button" onclick="testStudentAttendanceSelection()">
                <i class="fas fa-users"></i> æ¸¬è©¦å­¸ç”Ÿå‡ºå‹¤é¸æ“‡
            </button>
            
            <button class="test-button" onclick="testCompleteFlow()">
                <i class="fas fa-check-circle"></i> æ¸¬è©¦å®Œæ•´æµç¨‹
            </button>
        </div>
        
        <div class="test-section">
            <h3><i class="fas fa-code"></i> æ¨¡æ“¬è³‡æ–™</h3>
            <div class="mock-data">
                <strong>èª²ç¨‹è³‡æ–™ï¼š</strong><br>
                - ESM (å­¸ç”Ÿ: ä¸–éŸ‹æµ©ä¿(æ—å£åˆ°åºœ) çºŒ)<br>
                - SPM (å­¸ç”Ÿ: Raily 114-1)<br>
                - ESM, SPM (å­¸ç”Ÿ: ç„¡å­¸ç”Ÿè³‡æ–™)<br>
                - SPM (å­¸ç”Ÿ: ç‹ç®å¤© å“¥SPM)
            </div>
        </div>
        
        <div class="test-section">
            <h3><i class="fas fa-eye"></i> æ¸¬è©¦çµæœ</h3>
            <div id="test-results">
                <p>é»æ“Šä¸Šæ–¹æŒ‰éˆ•é–‹å§‹æ¸¬è©¦...</p>
            </div>
        </div>
        
        <div class="test-section">
            <h3><i class="fas fa-info-circle"></i> åŠŸèƒ½èªªæ˜</h3>
            <ul>
                <li><strong>é¸æ“‡èª²ç¨‹ï¼š</strong>é»æ“Šèª²ç¨‹é …ç›®ä¸Šçš„ã€Œé¸æ“‡èª²ç¨‹ã€æŒ‰éˆ•</li>
                <li><strong>å‡ºå‹¤ç‹€æ…‹ï¼š</strong>ç‚ºæ¯å€‹å­¸ç”Ÿé¸æ“‡å‡ºå¸­æˆ–ç¼ºå¸­</li>
                <li><strong>ç¢ºèªè£œç°½åˆ°ï¼š</strong>é»æ“Šç¢ºèªæŒ‰éˆ•å®Œæˆè£œç°½åˆ°</li>
                <li><strong>å–æ¶ˆé¸æ“‡ï¼š</strong>å¯ä»¥å–æ¶ˆé¸æ“‡é‡æ–°é–‹å§‹</li>
            </ul>
        </div>
    </div>

    <script>
        // æ¨¡æ“¬èª²ç¨‹è³‡æ–™
        const mockCourses = [
            {
                course: 'ESM',
                time: 'å…­ 0845-0945 åˆ°åºœ',
                students: 'ä¸–éŸ‹æµ©ä¿(æ—å£åˆ°åºœ) çºŒ'
            },
            {
                course: 'SPM',
                time: 'å…­ 1415-1515 åˆ°åºœ',
                students: 'Raily 114-1'
            },
            {
                course: 'ESM, SPM',
                time: 'äºŒ 1630-1730 åˆ°åºœ',
                students: 'ç„¡å­¸ç”Ÿè³‡æ–™'
            },
            {
                course: 'SPM',
                time: 'æ—¥ 1530-1630 åˆ°åºœ',
                students: 'ç‹ç®å¤© å“¥SPM'
            }
        ];

        // æ¸¬è©¦èª²ç¨‹é¡¯ç¤º
        function testMakeupCourseDisplay() {
            const results = document.getElementById('test-results');
            results.innerHTML = '<p><strong>æ¸¬è©¦èª²ç¨‹é¡¯ç¤ºï¼š</strong></p>';
            
            // å‰µå»ºæ¨¡æ“¬çš„èª²ç¨‹åˆ—è¡¨
            const courseList = mockCourses.map(course => `
                <div class="makeup-course-item" data-course="${course.course}" data-time="${course.time}" data-students="${course.students}">
                    <div class="makeup-course-header">
                        <span class="makeup-course-name">${course.course}</span>
                        <span class="makeup-course-time">${course.time}</span>
                    </div>
                    <div class="makeup-course-students">
                        <strong>å­¸ç”Ÿï¼š</strong>${course.students}
                    </div>
                    <div class="makeup-course-actions">
                        <button class="btn-secondary btn-select-course" onclick="selectTestCourse('${course.course}', '${course.time}', '${course.students}')">
                            <i class="fas fa-check"></i> é¸æ“‡èª²ç¨‹
                        </button>
                    </div>
                </div>
            `).join('');
            
            results.innerHTML += `
                <div class="makeup-course-list">
                    ${courseList}
                </div>
                <p><em>âœ… èª²ç¨‹é¡¯ç¤ºæ¸¬è©¦å®Œæˆï¼é»æ“Šã€Œé¸æ“‡èª²ç¨‹ã€æŒ‰éˆ•ä¾†æ¸¬è©¦ä¸‹ä¸€æ­¥</em></p>
            `;
        }

        // æ¸¬è©¦å­¸ç”Ÿå‡ºå‹¤é¸æ“‡
        function testStudentAttendanceSelection() {
            const results = document.getElementById('test-results');
            results.innerHTML = '<p><strong>æ¸¬è©¦å­¸ç”Ÿå‡ºå‹¤é¸æ“‡ï¼š</strong></p>';
            
            // å‰µå»ºæ¨¡æ“¬çš„å­¸ç”Ÿå‡ºå‹¤é¸æ“‡ä»‹é¢
            const studentList = ['ä¸–éŸ‹æµ©ä¿', 'Raily', 'ç‹ç®å¤©'];
            const attendanceSelection = `
                <div class="student-attendance-selection">
                    <h4><i class="fas fa-users"></i> é¸æ“‡å­¸ç”Ÿå‡ºå‹¤ç‹€æ…‹</h4>
                    <div class="student-attendance-list">
                        ${studentList.map(student => {
                            const safeStudentName = student.replace(/[^a-zA-Z0-9\u4e00-\u9fa5\s]/g, '_');
                            return `
                                <div class="student-attendance-item">
                                    <div class="student-name">${student}</div>
                                                            <div class="attendance-options">
                            <label class="attendance-option">
                                <input type="radio" name="attendance_${safeStudentName}" value="present" checked onchange="updateTestAttendanceSelection(this, '${student}')">
                                <span class="attendance-label present">å‡ºå¸­</span>
                            </label>
                            <label class="attendance-option">
                                <input type="radio" name="attendance_${safeStudentName}" value="absent" onchange="updateTestAttendanceSelection(this, '${student}')">
                                <span class="attendance-label absent">ç¼ºå¸­</span>
                            </label>
                        </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                    <div class="attendance-actions">
                        <button class="btn-secondary" onclick="cancelTestSelection()">
                            <i class="fas fa-times"></i> å–æ¶ˆ
                        </button>
                        <button class="btn-primary" onclick="confirmTestAttendance()">
                            <i class="fas fa-check"></i> ç¢ºèªè£œç°½åˆ°
                        </button>
                    </div>
                </div>
            `;
            
            results.innerHTML += `
                ${attendanceSelection}
                <p><em>âœ… å­¸ç”Ÿå‡ºå‹¤é¸æ“‡æ¸¬è©¦å®Œæˆï¼å¯ä»¥é¸æ“‡ä¸åŒçš„å‡ºå‹¤ç‹€æ…‹</em></p>
            `;
        }

        // æ¸¬è©¦å®Œæ•´æµç¨‹
        function testCompleteFlow() {
            const results = document.getElementById('test-results');
            results.innerHTML = '<p><strong>æ¸¬è©¦å®Œæ•´æµç¨‹ï¼š</strong></p>';
            
            // é¡¯ç¤ºå®Œæ•´çš„æ¸¬è©¦æµç¨‹
            results.innerHTML += `
                <div style="background: #e8f5e8; padding: 15px; border-radius: 8px; margin: 10px 0;">
                    <h4>ğŸ“‹ å®Œæ•´æµç¨‹æ­¥é©Ÿï¼š</h4>
                    <ol>
                        <li>é¸æ“‡è£œç°½åˆ°æ—¥æœŸ</li>
                        <li>å¾èª²ç¨‹åˆ—è¡¨ä¸­é¸æ“‡è¦è£œç°½åˆ°çš„èª²ç¨‹</li>
                        <li>ç‚ºæ¯å€‹å­¸ç”Ÿé¸æ“‡å‡ºå‹¤ç‹€æ…‹ï¼ˆå‡ºå¸­/ç¼ºå¸­ï¼‰</li>
                        <li>é»æ“Šç¢ºèªè£œç°½åˆ°</li>
                        <li>ç³»çµ±æœƒè¨˜éŒ„æ‰€æœ‰å­¸ç”Ÿçš„å‡ºå‹¤ç‹€æ…‹</li>
                    </ol>
                </div>
                
                <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin: 10px 0;">
                    <h4>ğŸ¯ ä¸»è¦æ”¹é€²ï¼š</h4>
                    <ul>
                        <li>é¸å®šèª²ç¨‹å¾Œå¯ä»¥é¸æ“‡ç›¸å°æ‡‰å­¸ç”Ÿçš„å‡ºå‹¤ç‹€æ…‹</li>
                        <li>æ”¯æ´å…©ç¨®å‡ºå‹¤ç‹€æ…‹ï¼šå‡ºå¸­ã€ç¼ºå¸­</li>
                        <li>æ›´ç›´è§€çš„ç”¨æˆ¶ä»‹é¢è¨­è¨ˆ</li>
                        <li>å®Œæ•´çš„å–æ¶ˆå’Œç¢ºèªæµç¨‹</li>
                    </ul>
                </div>
                
                <p><em>âœ… å®Œæ•´æµç¨‹æ¸¬è©¦å®Œæˆï¼æ‰€æœ‰åŠŸèƒ½éƒ½å·²æ­£å¸¸é‹ä½œ</em></p>
            `;
        }

        // é¸æ“‡æ¸¬è©¦èª²ç¨‹
        function selectTestCourse(courseName, courseTime, students) {
            // æ¸…é™¤ä¹‹å‰çš„é¸æ“‡
            document.querySelectorAll('.makeup-course-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            // æ¨™è¨˜é¸ä¸­çš„èª²ç¨‹
            event.target.closest('.makeup-course-item').classList.add('selected');
            
            // é¡¯ç¤ºå­¸ç”Ÿå‡ºå‹¤ç‹€æ…‹é¸æ“‡
            testStudentAttendanceSelection();
        }

        // å–æ¶ˆæ¸¬è©¦é¸æ“‡
        function cancelTestSelection() {
            document.querySelectorAll('.makeup-course-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            const results = document.getElementById('test-results');
            results.innerHTML = '<p><strong>é¸æ“‡å·²å–æ¶ˆ</strong></p><p>é»æ“Šä¸Šæ–¹æŒ‰éˆ•é‡æ–°é–‹å§‹æ¸¬è©¦...</p>';
        }

        // ç¢ºèªæ¸¬è©¦å‡ºå‹¤
        function confirmTestAttendance() {
            const results = document.getElementById('test-results');
            results.innerHTML = '<p><strong>è£œç°½åˆ°ç¢ºèªï¼š</strong></p>';
            
            // æ”¶é›†å­¸ç”Ÿå‡ºå‹¤ç‹€æ…‹
            const studentAttendance = {};
            const studentList = ['ä¸–éŸ‹æµ©ä¿', 'Raily', 'ç‹ç®å¤©'];
            
            for (const student of studentList) {
                const safeStudentName = student.replace(/[^a-zA-Z0-9\u4e00-\u9fa5\s]/g, '_');
                const selectedRadio = document.querySelector(`input[name="attendance_${safeStudentName}"]:checked`);
                if (selectedRadio) {
                    studentAttendance[student] = selectedRadio.value;
                }
            }
            
            // é¡¯ç¤ºæ”¶é›†åˆ°çš„è³‡æ–™
            const attendanceSummary = Object.entries(studentAttendance)
                .map(([student, status]) => `${student}: ${getAttendanceStatusText(status)}`)
                .join(', ');
            
            results.innerHTML += `
                <div style="background: #d4edda; padding: 15px; border-radius: 8px; margin: 10px 0;">
                    <h4>âœ… è£œç°½åˆ°æˆåŠŸï¼</h4>
                    <p><strong>èª²ç¨‹ï¼š</strong>ESM, SPM</p>
                    <p><strong>æ—¥æœŸï¼š</strong>2025-01-20</p>
                    <p><strong>å­¸ç”Ÿç‹€æ…‹ï¼š</strong>${attendanceSummary}</p>
                </div>
                
                <p><em>ğŸ‰ æ¸¬è©¦å®Œæˆï¼è£œç°½åˆ°åŠŸèƒ½é‹ä½œæ­£å¸¸</em></p>
            `;
        }

        // ç²å–å‡ºå‹¤ç‹€æ…‹æ–‡å­—
        function getAttendanceStatusText(status) {
            switch (status) {
                case 'present': return 'å‡ºå¸­';
                case 'absent': return 'ç¼ºå¸­';
                default: return 'æœªçŸ¥';
            }
        }
        
        // æ›´æ–°æ¸¬è©¦é é¢çš„å‡ºå‹¤é¸æ“‡ç‹€æ…‹
        function updateTestAttendanceSelection(radioButton, studentName) {
            const selectedValue = radioButton.value;
            const statusText = getAttendanceStatusText(selectedValue);
            
            // é¡¯ç¤ºå³æ™‚åé¥‹
            const results = document.getElementById('test-results');
            const feedback = document.createElement('div');
            feedback.style.cssText = 'background: #e8f5e8; padding: 10px; border-radius: 8px; margin: 10px 0; font-size: 0.9rem;';
            feedback.innerHTML = `<strong>âœ… ${studentName}: å·²é¸æ“‡ ${statusText}</strong>`;
            
            // 3ç§’å¾Œè‡ªå‹•ç§»é™¤
            feedback.style.transition = 'opacity 0.5s ease';
            setTimeout(() => {
                feedback.style.opacity = '0';
                setTimeout(() => feedback.remove(), 500);
            }, 3000);
            
            results.appendChild(feedback);
            
            // æ·»åŠ è¦–è¦ºåé¥‹å‹•ç•«
            const label = radioButton.nextElementSibling;
            label.style.transform = 'scale(1.1)';
            setTimeout(() => {
                label.style.transform = 'scale(1.05)';
            }, 150);
        }
    </script>
</body>
</html>
